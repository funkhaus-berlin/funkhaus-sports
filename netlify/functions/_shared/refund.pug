doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    link(href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet")
    title Funkhaus Sports - Booking Cancellation & Refund
    style.
      /* Base styles */
      body {
        font-family: "Montserrat", Helvetica, Arial, sans-serif;
        line-height: 1.4;
        color: #1a1a1a;
        background-color: #f5f5f5;
        margin: 0;
        padding: 0;
      }
      
      /* Table reset */
      table {
        border-collapse: collapse;
        border-spacing: 0;
      }
      
      /* Main wrapper */
      .main-table {
        width: 100%;
        max-width: 600px;
        margin: 0 auto;
        background-color: #ffffff;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      }
      
      /* Header - softer dark theme */
      .header {
        background-color: #0f0f0f;
        text-align: center;
        padding: 20px 0;
      }
      
      /* Content area */
      .content {
        padding: 20px;
      }
      
      /* Status banner */
      .status-banner {
        background-color: #fee;
        border: 1px solid #fcc;
        border-radius: 6px;
        padding: 15px;
        margin-bottom: 20px;
        text-align: center;
      }
      
      .status-icon {
        font-size: 36px;
        margin-bottom: 8px;
      }
      
      /* Details section */
      .details-box {
        background-color: #f9f9f9;
        border-radius: 6px;
        padding: 18px;
        margin: 20px 0;
      }
      
      .detail-row {
        display: flex;
        justify-content: space-between;
        padding: 8px 0;
        border-bottom: 1px solid #e8e8e8;
      }
      
      .detail-row:last-child {
        border-bottom: none;
      }
      
      /* Refund info */
      .refund-box {
        background-color: #f0f9ff;
        border: 1px solid #bae6fd;
        border-radius: 6px;
        padding: 18px;
        margin: 20px 0;
      }
      
      /* Footer */
      .footer {
        text-align: center;
        font-size: 12px;
        color: #666;
        padding: 15px 0;
        border-top: 1px solid #f0f0f0;
      }
      
      .footer a {
        color: #0f0f0f;
        text-decoration: none;
        font-weight: 500;
      }
      
      /* Mobile adjustments */
      @media screen and (max-width: 480px) {
        .content {
          padding: 15px;
        }
        
        h1 {
          font-size: 20px !important;
        }
        
        .detail-row {
          flex-direction: column;
          text-align: left;
        }
        
        .detail-row > div:last-child {
          margin-top: 4px;
          font-weight: 600;
        }
      }

  body(style="margin:0;padding:15px;background-color:#f5f5f5;")
    table.main-table(cellpadding="0" cellspacing="0" border="0" width="100%" style="max-width:600px;margin:0 auto;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,0.06);")
      //- Header with softer black
      tr
        td.header(align="center" bgcolor="#0f0f0f" style="padding:20px 0;")
          img.logo(src="https://funkhaus-sports.netlify.app/logo-light.png" alt="Funkhaus" style="height:60px;width:auto;")
      
      //- Content
      tr
        td.content(style="padding:20px;background-color:#ffffff;")
          //- Greeting
          p(style="font-size:14px;margin:0 0 8px;color:#666;") Hello #{customer.name},
          h1(style="font-size:22px;font-weight:600;margin:0 0 20px;color:#0f0f0f;") Your booking has been cancelled
          
          //- Status banner
          table.status-banner(cellpadding="0" cellspacing="0" border="0" width="100%" style="margin-bottom:20px;background-color:#fee;border:1px solid #fcc;border-radius:6px;")
            tr
              td(align="center" style="padding:15px;")
                div(style="font-size:36px;margin-bottom:8px;") ❌
                div(style="font-size:16px;font-weight:600;color:#dc2626;") Booking Cancelled
                div(style="font-size:14px;color:#666;margin-top:4px;") Your refund is being processed
          
          //- Original booking details
          table.details-box(cellpadding="0" cellspacing="0" border="0" width="100%" style="background-color:#f9f9f9;border-radius:6px;padding:18px;margin:20px 0;")
            tr
              td
                h3(style="font-size:16px;font-weight:600;margin:0 0 12px;color:#0f0f0f;") Original Booking Details
                
                table(cellpadding="0" cellspacing="0" border="0" width="100%" style="font-size:14px;")
                  tr
                    td(style="padding:8px 0;border-bottom:1px solid #e8e8e8;")
                      span(style="color:#666;") Booking ID:
                    td(align="right" style="padding:8px 0;border-bottom:1px solid #e8e8e8;font-weight:500;")
                      | #{bookingId}
                  
                  tr
                    td(style="padding:8px 0;border-bottom:1px solid #e8e8e8;")
                      span(style="color:#666;") Date:
                    td(align="right" style="padding:8px 0;border-bottom:1px solid #e8e8e8;font-weight:500;")
                      | #{booking.date}
                  
                  tr
                    td(style="padding:8px 0;border-bottom:1px solid #e8e8e8;")
                      span(style="color:#666;") Time:
                    td(align="right" style="padding:8px 0;border-bottom:1px solid #e8e8e8;font-weight:500;")
                      | #{timeDisplay}
                  
                  tr
                    td(style="padding:8px 0;border-bottom:1px solid #e8e8e8;")
                      span(style="color:#666;") Court:
                    td(align="right" style="padding:8px 0;border-bottom:1px solid #e8e8e8;font-weight:500;")
                      | #{booking.court}
                  
                  tr
                    td(style="padding:8px 0;")
                      span(style="color:#666;") Venue:
                    td(align="right" style="padding:8px 0;font-weight:500;")
                      | #{booking.venue}
          
          //- Refund information
          table.refund-box(cellpadding="0" cellspacing="0" border="0" width="100%" style="background-color:#f0f9ff;border:1px solid #bae6fd;border-radius:6px;padding:18px;margin:20px 0;")
            tr
              td
                h3(style="font-size:16px;font-weight:600;margin:0 0 12px;color:#0f0f0f;") Refund Information
                
                table(cellpadding="0" cellspacing="0" border="0" width="100%" style="font-size:14px;")
                  tr
                    td(style="padding:8px 0;border-bottom:1px solid #e1f5fe;")
                      span(style="color:#666;") Refund Amount:
                    td(align="right" style="padding:8px 0;border-bottom:1px solid #e1f5fe;")
                      span(style="font-size:18px;font-weight:600;color:#0f0f0f;") €#{refund.amount}
                  
                  tr
                    td(style="padding:8px 0;border-bottom:1px solid #e1f5fe;")
                      span(style="color:#666;") Refund Status:
                    td(align="right" style="padding:8px 0;border-bottom:1px solid #e1f5fe;font-weight:500;")
                      | #{refund.status}
                  
                  if refund.id
                    tr
                      td(style="padding:8px 0;border-bottom:1px solid #e1f5fe;")
                        span(style="color:#666;") Refund ID:
                      td(align="right" style="padding:8px 0;border-bottom:1px solid #e1f5fe;font-weight:500;font-size:12px;")
                        | #{refund.id}
                  
                  if refund.reason
                    tr
                      td(style="padding:8px 0;")
                        span(style="color:#666;") Reason:
                      td(align="right" style="padding:8px 0;font-weight:500;")
                        | #{refund.reason}
          
          //- Processing timeline
          p(style="font-size:14px;color:#666;margin:20px 0;text-align:center;padding:20px;background-color:#f9f9f9;border-radius:6px;")
            | Your refund will be processed within 
            strong 5-10 business days
            |  depending on your payment method and bank.
          
          //- Support contact
          p(style="font-size:14px;color:#333;margin:20px 0 0;text-align:center;")
            | If you have any questions about your refund, please contact us at 
            br
            a(href="mailto:ticket@funkhaus-sports.com" style="color:#0f0f0f;text-decoration:none;font-weight:600;") ticket@funkhaus-sports.com
      
      //- Footer
      tr
        td(align="center" style="padding:15px 0;text-align:center;font-size:12px;color:#666;border-top:1px solid #f0f0f0;background-color:#ffffff;")
          | © #{new Date().getFullYear()} Funkhaus Sports GmbH
          br
          | Nalepastrasse 18, 12459 Berlin, Germany